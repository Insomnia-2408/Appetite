<ion-header>
  <ion-toolbar>
    <ion-title>{{loadingRecipe ? 'Loading recipe...' : recipe.name}}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button (click)="navigateBack()"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-spinner *ngIf="loadingRecipe"></ion-spinner>
  <div fxLayout="column" *ngIf="!loadingRecipe && !editing">
      <img [src]="getImage()" alt="{{recipe.name}}"/>
    <ion-list class="ion-padding">
      <ion-item class="ion-no-padding">
        <div fxLayout="column">
          <p><strong>Description</strong></p>
          <p>{{recipe.description}}</p>
        </div>
      </ion-item>
      <ion-item class="ion-no-padding">
        <div fxLayout="column">
          <p><strong>Instructions</strong></p>
          <p>{{recipe.instructions}}</p>
        </div>
      </ion-item>
      <ion-item class="ion-no-padding">
        <div fxLayout="row" fxLayoutGap="10px">
          <p><strong>Servings</strong></p>
          <p>{{recipe.servings}}</p>
        </div>
      </ion-item>
      <ion-item class="ion-no-padding" *ngIf="recipe.ingredients.length > 0">
        <div fxLayout="column" fxFlexFill>
          <p><strong>Ingredients</strong></p>
          <div fxLayout="row" *ngFor="let ingredient of recipe.ingredients">
            <p fxFlex="40">{{ingredient.amount}} {{ingredient.unit}}</p>
            <p fxFlex="60">{{ingredient.name}}</p>
          </div>
        </div>
      </ion-item>
    </ion-list>
    <ion-button (click)="editing = true">Edit recipe</ion-button>
  </div>
  <app-recipe-form *ngIf="!loadingRecipe && editing" (recipeOut)="editRecipe($event)"
                   [recipeIn]="recipe"></app-recipe-form>
</ion-content>
